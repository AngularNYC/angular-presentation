<div *ngIf="result$ | async as result" class="container">
  <codelab-simple-tests-progress
    [tests]="result.tests"
  ></codelab-simple-tests-progress>
  <div *ngIf="result.error" class="error-message">
    Error: {{ result.error?.message }}
  </div>
  <ng-container *ngFor="let t of result.tests; trackBy: getName">
    <div
      *ngIf="t.featured || seeAll"
      class="test"
      [class.featured]="t.featured"
      [class.see-all]="seeAll"
    >
      <div class="state">
        <mat-icon *ngIf="t.pass === true" class="pass">check_circle</mat-icon>
        <mat-icon *ngIf="t.pass === false" class="fail">error_outline</mat-icon>
        <mat-icon *ngIf="t.pass === undefined" class="running"
          >refresh</mat-icon
        >
      </div>
      <div>
        <div class="name" [title]="t.name">{{ t.name }}</div>
        <div class="error" *ngIf="t.featured">{{ t.error }}</div>
      </div>
    </div>
  </ng-container>

  <mat-checkbox [(ngModel)]="seeAll" *ngIf="tests?.length > 1" i18n>
    Display all tests
  </mat-checkbox>
</div>
