<div class="time">
  <div *ngIf="poll.$isPollRunning|async else timeOver">
    <h2>⏱ {{poll.timeLeft$ | async}} seconds left</h2>
  </div>
</div>
<ng-template #timeOver>
  <h2>⏱ Time is over</h2>
</ng-template>

<h1>{{config.question}}</h1>

<ng-container *ngIf="poll.isPollEnabled$ | async else wait">
  <ng-container *ngIf="poll.hasVotes$ | async else waiting">
    <div *ngIf="poll.config.answer && (poll.$isPollRunning | async) === true">
      <h2>Collecting answers</h2>
      <h2>{{poll.votesCount$ | async}} votes</h2>
    </div>
    <div class="results" *ngIf="!poll.config.answer || ((poll.$isPollRunning | async) === false)">
      <slides-choice-presenter *ngIf="config.type === 'choice'"
                               [votes]="poll.votes$ | async"
                               [options]="poll.config.options"
      ></slides-choice-presenter>
      <slides-stars-presenter *ngIf="config.type === 'stars'"
                              [votes]="poll.votes$ | async"></slides-stars-presenter>
    </div>
  </ng-container>
  <ng-template #waiting>
    <div *ngIf="poll.$isPollRunning|async">
      <h1 style="text-align: center;">Waiting for votes...</h1>
      <div class="bunny"></div>
    </div>
  </ng-template>
</ng-container>

<ng-template #wait>
  Poll has not been started yet.
</ng-template>

